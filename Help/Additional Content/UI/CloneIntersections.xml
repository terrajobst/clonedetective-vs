<topic>
	<head>
		<title>Clone Intersections</title>
		<keywords>
			<f1keyword term="CloneDetective.UI.CloneIntersections" />
		</keywords>
		<links>
			<link href="CloneExplorer.html">Clone Explorer</link>
			<link href="CloneResults.html">Clone Results</link>
		</links>
	</head>
	<body>
		<summary>
			<p>
				The Clone Intersections tool window provides you with a list of files that
				share source code with the current selection.
			</p>
			<p>
				To access Clone Intersections, select <b>Clone Intersections</b> on the
				<b>View</b> - <b>Other Windows</b> menu.
			</p>
		</summary>

		<section title="Selection Context">
			<p>
				The content of the Clone Intersections tool window depends on the current
				selection. If the selection can be interpreted as a file, Clone Intersections
				will list all files that share source code, i.e. have at least one clone class
				in common. This file will be called the <b>reference file</b>.
			</p>
			<p>
				The selection context can be one of the following:
			</p>
			<table>
				<tr>
					<th>Context</th>
					<th>Result</th>
				</tr>
				<tr>
					<td>
						<a href="CloneExplorer.html">Clone Explorer</a>
					</td>
					<td>
						If you have selected a file, Clone Intersections will use it as the
						reference file.
					</td>
				</tr>
				<tr>
					<td>Solution Explorer</td>
					<td>
						If you have selected a file, Clone Intersections will use it as the
						reference file.
					</td>
				</tr>
				<tr>
					<td>Class View</td>
					<td>
						If you have selected a type, Clone Intersections will determine the
						file the type is contained in and use it as the reference file.
					</td>
				</tr>
				<tr>
					<td>Document</td>
					<td>
						If the document part of Visual Studio has the focus, Clone Intersections
						will use the active document as the reference file.
					</td>
				</tr>
			</table>
		</section>

		<section title="Representation">
			<p>
				A typical representation of Clone Intersections will look like this:
			</p>
			<img src="CloneIntersections.png" />
			<p>
				The Clone Intersections tool window consists of two parts, a <b>header</b>
				and a <b>file list</b>. The header contains the reference file while the
				file list contains all other files that share source code with the reference
				file.
			</p>
			<note>
				If the reference file only shares source code with itself the file list
				will be empty.
			</note>
			<p>
				In the sample above <b>FunctionInvocationExpression.cs</b> is the reference file
				and shares code with six other files.
			</p>
			<p>
				The bar charts show a graphical representation of the file content and clone distribution.
				The wider the bar, the more source code the file contains. Instead of displaying the content
				in top-down fashion, the bars are displayed left-right. That means that the first line
				is at the left side while the last line is at the right side. Each clone class is given
				a unique color.
			</p>
			<p>
				For the sample above this provides you with the following pieces of information:
			</p>
			<ul>
				<li>
					MethodInvocationExpression.cs is the biggest file but it is not much larger than
					the reference file FunctionInvocationExpression.cs.
				</li>
				<li>
					FunctionInvocationExpression.cs contains at least six clone classes.
				</li>
				<li>
					Most clones are shared with MethodInvocationExpression.cs.
				</li>
				<li>
					The clone class that is colored cyan is distributed across three files and is always
					contained in the upper part of the file. Contrast this with the purple clone class
					which contains clones in five files and is always contained in the lower part of a
					file.
				</li>
			</ul>
			<note>
				Please note that it is possible that clones overlap. Therefore we said above that
				FunctionInvocationExpression.cs contains <b>at least</b> six clone classes; it is still
				possible that it contains more clone classes which are hidden in the chart due to overlapping.
			</note>
		</section>

		<section title="Navigation">
			<p>
				The Clone Intersections tool window allows you to easily open the files and navigate to
				the duplicated source code. For this you only have to right click the file (either the
				reference file or a file contained in the file list). In the context menu you see all
				clones contained in that file. Select the clone you want to open and click <b>Open in Code Editor</b>.
			</p>
			<img src="CloneIntersectionsContextMenu.png" />
			<p>
				The file will be opened in the code editor and the cloned source code is selected.
			</p>
			<note>
				For the reference file you can this even do quicker by just double clicking the appropriate
				clone in the chart. Double clicking a file in the file list will only open it in the code
				editor -- regardless which clone you clicked. Therefore, for files in the file list you have
				to use the context menu.
			</note>
		</section>

		<section title="Hunting a Particular Clone Class">
			<p>
				If you want to concentrate on a particular clone class you can also search all occurrences
				of it by right clicking the file, selecting a clone, and clicking on <b>Find all Occurrences</b>.
				This will open the <a href="CloneResults.html">Clone Results</a> tool window that lists all
				files that contain the selected clone class.
			</p>
		</section>
	</body>
</topic>
